[tool:pytest]
flake8-max-line-length = 180
flake8-ignore =
    *.py E122
    *.py E203  # E203 whitespace before ':'
    *.py E402
    *.py W503  # line break before binary operators is a good thing
    *.py E731  # it's OK to assign lambda to variable
    xonsh/pygments_cache.py ALL
    # flake8 gives incorrect unused import errors, F401
    xonsh/ast.py F401
    #xonsh/platform.py F401
    #xonsh/built_ins.py F821 E721
    #xonsh/commands_cache.py F841
    #xonsh/history.py F821
    xonsh/jupyter_kernel.py E203
    #xonsh/pyghooks.py F821
    #xonsh/style_tools.py F821
    xonsh/readline_shell.py F401
    xonsh/timings.py F401
    #xonsh/tokenize.py F821 F841
    xonsh/tools.py E731
    xonsh/xonfig.py E731
    xonsh/proc.py E261 E265
    xonsh/ptk/key_bindings.py F841
    xonsh/ptk/shell.py E731
    #xontrib/vox.py F821
    __amalgam__.py ALL
    # we don't care about sphinx autogenerated files
    docs/*.py ALL
    # we don't care about ply files?
    ply/*.py ALL
    # these run VERY slowly and give tons of errors
    parser*_table.py ALL
    # oh come on
    setup.py ALL
    
    # remove these later
    *.py E741 # ambiguous variable name
    xonsh/color_tools.py E305
    xonsh/inspectors.py E722
    xonsh/lexer.py E741
    xonsh/platform.py E305
    xonsh/style_tools.py E305
    xonsh/tools.py E305
    xonsh/winutils.py E305
    xonsh/completers/_aliases.py E305
    xonsh/completers/python.py E722
    xonsh/parsers/context_check.py E305
    xonsh/xoreutils/*.py E722 E305
    
# it turns out [flake8] is *much* different than [pytest] --flake8-ignore.  Must rewrite significantly just to achieve parity.
[flake8]
max-line-length = 180
exclude =
    __amalgam__.py,
    tests/,
    docs/,
    */ply/,
    parser*_table.py,
    build/,
    dist/,
    setup.py,
    .vscode/,
    # remove later
    pygments_cache.py
# lint nits that are acceptable in Xonsh project:
ignore =
    E122,
    # E203 whitespace before ':'
    E203,
    E402,
    # line break before binary operators is a good thing
    W503,
    # accept lambda assigned to a variable
    E731,
    # remove these later
     # E741 - ambiguous variable name 
    E741,
# also acceptable in Xonsh project: reference to global names defined at runtime by black magic
builtins =  
    events,
    aliases,
    XonshError,
# near analog to pytest-flake8 --flake8-ignore, but comma or ws separated (relies on stateful parser!)
# and only allows*not* comma separated!
per-file-ignores = 
    # flake8 gives incorrect unused import errors, F401
    tests/tools.py:E128,
    xonsh/ast.py:F401,
    ##xonsh/built_ins.py:F821 E721,
    xonsh/built_ins.py:E721,
    ##xonsh/commands_cache.py:F841,
    ##xonsh/history.py:F821,
    xonsh/jupyter_kernel.py:E203,
    # e305 later
    xonsh/platform.py:F401 E305,
    xonsh/proc.py:E261 E265,
    ##xonsh/ptk/key_bindings.py:F841,
    xonsh/ptk/shell.py:E731,
    ##xonsh/pyghooks.py:F821,
    xonsh/readline_shell.py:F401,
     # E305 later
    ##xonsh/style_tools.py:F821 E305,
    xonsh/timings.py:F401,
    ##xonsh/tokenize.py:F821 F841,
     # E305 later
    xonsh/tools.py:E731 E305,
    xonsh/xonfig.py:E731,
    ##xontrib/vox.py:F821,
    # remove these later
    xonsh/color_tools.py:E305
    xonsh/completers/_aliases.py:E305,
    xonsh/completers/python.py:E722,
    xonsh/inspectors.py:E722
    xonsh/lexer.py:E741,
    xonsh/parsers/context_check.py:E305,
    xonsh/style_tools.py:E305,
    xonsh/tools.py:E305,
    xonsh/winutils.py:E305,
    xonsh/xoreutils/*.py:E722 E305,
